# ID命名規則

公式作品・公式楽曲のID命名規則を定義する。

---

## 公式作品ID (4桁)

### 形式

```
CCNN
```

- `CC` = カテゴリコード (2桁)
- `NN` = カテゴリ内の連番 (2桁、01から開始)

### カテゴリコード一覧

| コード | カテゴリキー | 説明 |
|--------|--------------|------|
| 01 | pc98 | PC-98作品 |
| 02 | windows | Windows作品 |
| 03 | zuns_music_collection | ZUN's Music Collection |
| 04 | akyus_untouched_score | 幺樂団の歴史 |
| 05 | commercial_books | 商業書籍 |
| 06 | tasofro | 黄昏フロンティア |
| 07 | other | その他 |

### 例

| ID | 説明 |
|----|------|
| 0101 | PC-98の1作目（東方靈異伝） |
| 0105 | PC-98の5作目（東方怪綺談） |
| 0201 | Windowsの1作目（東方紅魔郷） |
| 0228 | Windowsの28作目（東方錦上京） |
| 0301 | ZUNMCの1作目（蓬莱人形） |
| 0501 | 商業書籍の1作目（東方文花帖 BAiJR） |
| 0600 | 黄昏フロンティアの1作目（幻想曲抜萃）※00から開始 |
| 0799 | その他の特殊枠（その他） |

---

## 公式楽曲ID (8桁)

### 形式

```
WWWWTTTT
```

- `WWWW` = 作品ID (4桁、公式作品IDと同一)
- `TTTT` = トラック番号 (4桁、0001から開始、ゼロパディング)

### 例

| ID | 説明 |
|----|------|
| 01010001 | 作品0101（東方靈異伝）のトラック1 |
| 01010015 | 作品0101（東方靈異伝）のトラック15 |
| 02010007 | 作品0201（東方紅魔郷）のトラック7 |
| 02050007 | 作品0205（東方花映塚）のトラック7 |
| 03010011 | 作品0301（蓬莱人形）のトラック11 |

---

## 実装上の注意

### ID生成ロジック

1. **公式作品の新規作成時:**
   - カテゴリを選択
   - 該当カテゴリの最大連番を取得
   - 次の連番でIDを自動生成

2. **公式楽曲の新規作成時:**
   - 作品を選択
   - 該当作品の最大トラック番号を取得
   - 次のトラック番号でIDを自動生成

### バリデーション

- 公式作品ID: `/^(01|02|03|04|05|06|07)[0-9]{2}$/`
- 公式楽曲ID: `/^[0-9]{8}$/` かつ先頭4桁が有効な作品ID
